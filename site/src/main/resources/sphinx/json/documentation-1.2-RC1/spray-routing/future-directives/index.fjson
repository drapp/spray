{"body": "<div class=\"section\" id=\"futuresdirectives\">\n<span id=\"futuredirectives\"></span><h1>FuturesDirectives</h1>\n<p>Future directives can be used to run inner routes once the provided <tt class=\"docutils literal\"><span class=\"pre\">Future[T]</span></tt> is completed.</p>\n<div class=\"toctree-wrapper compound\">\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"oncomplete/\">onComplete</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"onsuccess/\">onSuccess</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"onfailure/\">onFailure</a></li>\n</ul>\n</div>\n<p>All future directives are evaluated once at route creation time and its result will always be used\nwhen evaluating the inner routes.</p>\n<div class=\"section\" id=\"example\">\n<h2>Example</h2>\n<div class=\"highlight-scala\"><div class=\"highlight\"><pre><span class=\"k\">val</span> <span class=\"n\">route</span> <span class=\"k\">=</span>\n  <span class=\"n\">onSuccess</span><span class=\"o\">((</span><span class=\"n\">resourceActor</span> <span class=\"o\">?</span> <span class=\"s\">&quot;GetResource&quot;</span><span class=\"o\">).</span><span class=\"n\">mapTo</span><span class=\"o\">[</span><span class=\"kt\">String</span><span class=\"o\">])</span> <span class=\"o\">{</span> <span class=\"n\">resource</span> <span class=\"k\">=&gt;</span>\n    <span class=\"c1\">// inner routes will always use the resource computed at creation time.</span>\n    <span class=\"n\">complete</span><span class=\"o\">(</span><span class=\"n\">resource</span><span class=\"o\">)</span>\n  <span class=\"o\">}</span>\n\n<span class=\"nc\">Get</span><span class=\"o\">(</span><span class=\"s\">&quot;/&quot;</span><span class=\"o\">)</span> <span class=\"o\">~&gt;</span> <span class=\"n\">route</span> <span class=\"o\">~&gt;</span> <span class=\"n\">check</span> <span class=\"o\">{</span>\n  <span class=\"n\">status</span> <span class=\"o\">===</span> <span class=\"nc\">OK</span>\n  <span class=\"n\">responseAs</span><span class=\"o\">[</span><span class=\"kt\">String</span><span class=\"o\">]</span> <span class=\"o\">===</span> <span class=\"s\">&quot;resource&quot;</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n<p>In case you need to evaluate the future with every request and the outer routes don&#8217;t do any extractions (by\nextracting a value, a directive make its inner route dynamic) you can wrap your route with the <a class=\"reference internal\" href=\"../execution-directives/dynamic/#dynamic\"><em>dynamic</em></a>\ndirective as shown bellow.</p>\n<div class=\"highlight-scala\"><div class=\"highlight\"><pre><span class=\"k\">val</span> <span class=\"n\">route</span> <span class=\"k\">=</span>\n  <span class=\"n\">dynamic</span> <span class=\"o\">{</span>\n    <span class=\"n\">onSuccess</span><span class=\"o\">((</span><span class=\"n\">resourceActor</span> <span class=\"o\">?</span> <span class=\"s\">&quot;GetResource&quot;</span><span class=\"o\">).</span><span class=\"n\">mapTo</span><span class=\"o\">[</span><span class=\"kt\">String</span><span class=\"o\">])</span> <span class=\"o\">{</span> <span class=\"n\">resources</span> <span class=\"k\">=&gt;</span>\n      <span class=\"c1\">// inner routes will get a fresh resource on every execution.</span>\n      <span class=\"n\">complete</span><span class=\"o\">(</span><span class=\"n\">resources</span><span class=\"o\">)</span>\n    <span class=\"o\">}</span>\n  <span class=\"o\">}</span>\n\n<span class=\"nc\">Get</span><span class=\"o\">(</span><span class=\"s\">&quot;/&quot;</span><span class=\"o\">)</span> <span class=\"o\">~&gt;</span> <span class=\"n\">route</span> <span class=\"o\">~&gt;</span> <span class=\"n\">check</span> <span class=\"o\">{</span>\n  <span class=\"n\">status</span> <span class=\"o\">===</span> <span class=\"nc\">OK</span>\n  <span class=\"n\">responseAs</span><span class=\"o\">[</span><span class=\"kt\">String</span><span class=\"o\">]</span> <span class=\"o\">===</span> <span class=\"s\">&quot;resource&quot;</span>\n<span class=\"o\">}</span>\n</pre></div>\n</div>\n</div>\n</div>\n", "display_toc": true, "title": "FuturesDirectives", "sourcename": "", "customsidebar": null, "current_page_name": "documentation/spray-routing/future-directives/index", "next": {"link": "oncomplete/", "title": "onComplete"}, "rellinks": [["genindex", "General Index", "I", "index"], ["documentation/spray-routing/future-directives/oncomplete", "onComplete", "N", "next"], ["documentation/spray-routing/form-field-directives/formFields", "formFields", "P", "previous"]], "meta": {}, "parents": [{"link": "../../", "title": "Documentation"}, {"link": "../", "title": "spray-routing"}, {"link": "../predefined-directives-by-trait/", "title": "Predefined Directives (by trait)"}], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">FuturesDirectives</a><ul>\n<li><a class=\"reference internal\" href=\"#example\">Example</a></li>\n</ul>\n</li>\n</ul>\n", "prev": {"link": "../form-field-directives/formFields/", "title": "formFields"}, "metatags": ""}