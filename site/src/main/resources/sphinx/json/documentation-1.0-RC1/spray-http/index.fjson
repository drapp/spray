{"body": "<div class=\"section\" id=\"spray-http\">\n<span id=\"id1\"></span><h1>spray-http</h1>\n<p>The <em>spray-http</em> module contains a fully immutable, case-class based model of the major HTTP data structures, like\nHTTP requests, responses and common headers. It also includes a parser for the latter, which is able to construct\nthe more structured header models from raw unstructured header name/value pairs.</p>\n<div class=\"section\" id=\"dependencies\">\n<h2>Dependencies</h2>\n<p><em>spray-http</em> is stand-alone in that it has no dependency on any other <em>spray</em> module and not even Akka.\nYou can therefore use it directly and independently for any other type of HTTP work you might be doing.</p>\n<p>Apart from the Scala library (see <a class=\"reference internal\" href=\"../../project-info/current-versions/#current-versions\"><em>Current Versions</em></a> chapter) <em>spray-http</em> only depends on <a class=\"reference external\" href=\"http://parboiled.org\">parboiled</a>,\na lightweight PEG parsing library providing the basis for the header parser. Since <a class=\"reference external\" href=\"http://parboiled.org\">parboiled</a> is also written and\nmaintained by the members of the <em>spray</em> team it&#8217;s not an &#8220;outside&#8221; dependency that we have no control over.</p>\n</div>\n<div class=\"section\" id=\"installation\">\n<h2>Installation</h2>\n<p>The <a class=\"reference internal\" href=\"../../project-info/maven-repository/#maven-repo\"><em>Maven Repository</em></a> chapter contains all the info about how to pull <em>spray-http</em> into your classpath.</p>\n<p>Afterwards just <tt class=\"docutils literal\"><span class=\"pre\">import</span> <span class=\"pre\">spray.http._</span></tt> to bring all relevant identifiers into scope.</p>\n</div>\n<div class=\"section\" id=\"overview\">\n<h2>Overview</h2>\n<p>Since <em>spray-http</em> provides the central HTTP data structures for <em>spray</em> you will find the following import\nin quite a few places around the <em>spray</em> code base (and probably your own code as well):</p>\n<div class=\"highlight-scala\"><div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nn\">spray.http._</span>\n</pre></div>\n</div>\n<p>This brings in scope all of the relevant things that are defined <a class=\"reference external\" href=\"https://github.com/spray/spray/tree/release/1.0/spray-http/src/main/scala/spray/http\">here</a> and that you&#8217;ll want to work with, mainly:</p>\n<ul class=\"simple\">\n<li><tt class=\"docutils literal\"><span class=\"pre\">HttpRequest</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">HttpResponse</span></tt>, the central message models</li>\n<li><tt class=\"docutils literal\"><span class=\"pre\">ChunkedRequestStart</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">ChunkedResponseStart</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">MessageChunk</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">ChunkedMessageEnd</span></tt> modeling the different\nmessage parts of request/response streams</li>\n<li><tt class=\"docutils literal\"><span class=\"pre\">HttpHeaders</span></tt>, an object containing all the defined HTTP header models</li>\n<li>Supporting types like <tt class=\"docutils literal\"><span class=\"pre\">Uri</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">HttpMethods</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">MediaTypes</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">StatusCodes</span></tt>, etc.</li>\n</ul>\n<p>A common pattern is that the model of a certain entity is represented by an immutable type (class or trait), while the\nactual instances of the entity defined by the HTTP spec live in an accompanying object carrying the name of the type\nplus a trailing &#8216;s&#8217;.</p>\n<p>For example:</p>\n<ul class=\"simple\">\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">HttpMethod</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">HttpMethods</span></tt> object.</li>\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">HttpCharset</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">HttpCharsets</span></tt> object.</li>\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">HttpEncoding</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">HttpEncodings</span></tt> object.</li>\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">HttpProtocol</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">HttpProtocols</span></tt> object.</li>\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">MediaType</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">MediaTypes</span></tt> object.</li>\n<li>The defined <tt class=\"docutils literal\"><span class=\"pre\">StatusCode</span></tt> instances live in the <tt class=\"docutils literal\"><span class=\"pre\">StatusCodes</span></tt> object.</li>\n</ul>\n<p>You get the point.</p>\n<p>In order to develop a better understanding for how <em>spray</em> models HTTP you probably should take some time to browse\naround the <a class=\"reference external\" href=\"https://github.com/spray/spray/tree/release/1.0/spray-http/src/main/scala/spray/http\">spray-http sources</a> (ideally with an IDE that supports proper code navigation).</p>\n</div>\n<div class=\"section\" id=\"content-type-header\">\n<h2>Content-Type Header</h2>\n<p>One thing worth highlighting is the special treatment of the HTTP <tt class=\"docutils literal\"><span class=\"pre\">Content-Type</span></tt> header. Since the binary content of\nHTTP message entities can only be properly interpreted when the corresponding content-type is known <em>spray-http</em> puts\nthe content-type value very close to the entity data. The <tt class=\"docutils literal\"><span class=\"pre\">HttpEntity.NonEmpty</span></tt> type (the non-empty variant of the\n<tt class=\"docutils literal\"><span class=\"pre\">HttpEntity</span></tt>) is essentially little more than a tuple of the <tt class=\"docutils literal\"><span class=\"pre\">ContentType</span></tt> and the entity&#8217;s bytes.\nAll logic in <em>spray</em> that needs to access the content-type of an HTTP message always works with the <tt class=\"docutils literal\"><span class=\"pre\">ContentType</span></tt>\nvalue in the <tt class=\"docutils literal\"><span class=\"pre\">HttpEntity</span></tt>. Potentially existing instances of the <tt class=\"docutils literal\"><span class=\"pre\">Content-Type</span></tt> header in the <tt class=\"docutils literal\"><span class=\"pre\">HttpMessage</span></tt>&#8216;s\nheader list are ignored!</p>\n</div>\n<div class=\"section\" id=\"custom-media-types\">\n<h2>Custom Media-Types</h2>\n<p><em>spray-http</em> defines the most important media types from the <a class=\"reference external\" href=\"http://www.iana.org/assignments/media-types/index.html\">IANA MIME media type registry</a> in the <a class=\"reference external\" href=\"https://github.com/spray/spray/blob/release/1.0/spray-http/src/main/scala/spray/http/MediaType.scala\">MediaTypes</a>\nobject, which also acts as a registry that you can register your own <tt class=\"docutils literal\"><span class=\"pre\">CustomMediaType</span></tt> instances with:</p>\n<div class=\"highlight-scala\"><div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nn\">spray.http.MediaTypes._</span>\n\n<span class=\"k\">val</span> <span class=\"nc\">MarkdownType</span> <span class=\"k\">=</span> <span class=\"n\">register</span><span class=\"o\">(</span>\n  <span class=\"nc\">MediaType</span><span class=\"o\">.</span><span class=\"n\">custom</span><span class=\"o\">(</span>\n    <span class=\"n\">mainType</span> <span class=\"k\">=</span> <span class=\"s\">&quot;text&quot;</span><span class=\"o\">,</span>\n    <span class=\"n\">subType</span> <span class=\"k\">=</span> <span class=\"s\">&quot;x-markdown&quot;</span><span class=\"o\">,</span>\n    <span class=\"n\">compressible</span> <span class=\"k\">=</span> <span class=\"kc\">true</span><span class=\"o\">,</span>\n    <span class=\"n\">binary</span> <span class=\"k\">=</span> <span class=\"kc\">false</span><span class=\"o\">,</span>\n    <span class=\"n\">fileExtensions</span> <span class=\"k\">=</span> <span class=\"nc\">Seq</span><span class=\"o\">(</span><span class=\"s\">&quot;markdown&quot;</span><span class=\"o\">,</span> <span class=\"s\">&quot;mdown&quot;</span><span class=\"o\">,</span> <span class=\"s\">&quot;md&quot;</span><span class=\"o\">)))</span>\n</pre></div>\n</div>\n<p>Once registered the custom type will be properly resolved, e.g. for incoming requests by <a class=\"reference internal\" href=\"../spray-routing/#spray-routing\"><em>spray-routing</em></a> or\nincoming responses by <a class=\"reference internal\" href=\"../spray-client/#spray-client\"><em>spray-client</em></a>. File extension resolution (as used for example by the\n<a class=\"reference internal\" href=\"../spray-routing/file-and-resource-directives/#fileandresourcedirectives\"><em>FileAndResourceDirectives</em></a>) will work as expected.</p>\n</div>\n</div>\n", "display_toc": true, "title": "spray-http", "sourcename": "", "customsidebar": null, "current_page_name": "documentation/spray-http/index", "next": {"link": "../spray-httpx/", "title": "spray-httpx"}, "rellinks": [["genindex", "General Index", "I", "index"], ["documentation/spray-httpx/index", "spray-httpx", "N", "next"], ["documentation/spray-client/index", "spray-client", "P", "previous"]], "meta": {}, "parents": [{"link": "../", "title": "Documentation"}], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">spray-http</a><ul>\n<li><a class=\"reference internal\" href=\"#dependencies\">Dependencies</a></li>\n<li><a class=\"reference internal\" href=\"#installation\">Installation</a></li>\n<li><a class=\"reference internal\" href=\"#overview\">Overview</a></li>\n<li><a class=\"reference internal\" href=\"#content-type-header\">Content-Type Header</a></li>\n<li><a class=\"reference internal\" href=\"#custom-media-types\">Custom Media-Types</a></li>\n</ul>\n</li>\n</ul>\n", "prev": {"link": "../spray-client/", "title": "spray-client"}, "metatags": ""}